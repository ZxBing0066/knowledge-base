# SSH

> `SSH`为`Secure Shell`的缩写,是目前较可靠,专为远程登录会话和其他网络服务提供安全性的协议.

## 验证方式

SSH提供两种级别的安全验证:

* 基于口令的安全验证
  
  只要你知道自己帐号和口令,就可以登录到远程主机.所有传输的数据都会被加密,但是不能保证你正在连接的服务器就是你想连接的服务器.可能会有别的服务器在冒充真正的服务器,也就是受到“中间人”这种方式的攻击.
  
* 基于密匙的安全验证

  需要依靠密匙,也就是你必须为自己创建一对密匙,并把公用密匙放在需要访问的服务器上.如果你要连接到SSH服务器上,客户端软件就会向服务器发出请求,请求用你的密匙进行安全验证.服务器收到请求之后,先在该服务器上你的主目录下寻找你的公用密匙,然后把它和你发送过来的公用密匙进行比较.如果两个密匙一致,服务器就用公用密匙加密“质询”（challenge）并把它发送给客户端软件.客户端软件收到“质询”之后就可以用你的私人密匙解密再把它发送给服务器.
  
  用这种方式,你必须知道自己密匙的口令.但是,与第一种级别相比,第二种级别不需要在网络上传送口令.
  
  第二种级别不仅加密所有传送的数据,而且“中间人”这种攻击方式也是不可能的（因为他没有你的私人密匙）.但是整个登录的过程可能需要10秒.

## ssh-keygen

* 生成密钥
  
  ```sh
  ssh-keygen -t rsa # rsa为加密方式,可选
  ```
  
  然后回车按照提示输入对应的内容

## 服务器授权登录

添加`id_rsa.pub`到`authorized_keys`,***记得修改权限***,不然会导致不生效.

```sh
$ chmod 700 .ssh/  
$ cd .ssh  
$ chmod 600 authorized_keys   
```

## ssh-agent

`ssh-agent`可以在密钥需要密码时将其添加进去,这样下次就不需要输入密钥密码了.

```sh
ssh-agent ssh-add ~/.ssh/id_rsa
```
